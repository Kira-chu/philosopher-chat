# 🚀 部署指南 - 让朋友也能访问

## 第一步：准备 GitHub 仓库

### 1. 创建 GitHub 账号（如果还没有）
- 访问 https://github.com
- 注册账号

### 2. 创建新仓库
- 点击右上角 "+" → "New repository"
- 仓库名：`philosopher-chat`（或你喜欢的名字）
- 选择 Public（公开）
- 不要勾选 "Initialize with README"
- 点击 "Create repository"

### 3. 推送代码到 GitHub

在 PowerShell 中运行：

```powershell
cd C:\Users\Fiona\Desktop\tarot

# 初始化 Git（如果还没有）
git init

# 添加所有文件
git add .

# 提交
git commit -m "Initial commit - 哲学家群聊应用"

# 添加远程仓库（替换成你的仓库地址）
git remote add origin https://github.com/你的用户名/philosopher-chat.git

# 推送到 GitHub
git branch -M main
git push -u origin main
```

**注意**：`.env` 文件已经在 `.gitignore` 中，不会被上传（安全）

---

## 第二步：部署后端到 Railway（免费）

### 1. 注册 Railway
- 访问 https://railway.app
- 点击 "Login" → 选择 "Login with GitHub"
- 授权 Railway 访问你的 GitHub

### 2. 创建项目
- 点击 "New Project"
- 选择 "Deploy from GitHub repo"
- 选择你的仓库 `philosopher-chat`

### 3. 配置项目
- Railway 会自动检测到项目
- 点击项目进入设置
- 找到 "Settings" → "Root Directory"
- 设置为：`backend`
- 点击 "Save"

### 4. 添加环境变量
- 在项目页面，点击 "Variables" 标签
- 添加以下环境变量：

```
DEEPSEEK_API_KEY = sk-27b719807adf432a977ace6fdfb58d59
DEEPSEEK_API_BASE = https://api.deepseek.com
DEEPSEEK_MODEL = deepseek-chat
```

### 5. 等待部署
- Railway 会自动开始部署
- 等待 2-3 分钟
- 部署完成后，Railway 会显示一个 URL（如 `https://xxx.railway.app`）
- **重要**：复制这个 URL，后面会用到

### 6. 测试后端
- 打开浏览器，访问：`https://你的railway地址/api/health`
- 应该看到：`{"status":"ok"}`

---

## 第三步：部署前端到 Vercel（免费）

### 1. 注册 Vercel
- 访问 https://vercel.com
- 点击 "Sign Up" → 选择 "Continue with GitHub"
- 授权 Vercel 访问你的 GitHub

### 2. 创建项目
- 点击 "Add New Project"
- 在 "Import Git Repository" 中选择你的仓库
- 点击 "Import"

### 3. 配置项目
- **Framework Preset**: Vite（会自动检测）
- **Root Directory**: 点击 "Edit" → 设置为 `frontend`
- **Build Command**: `npm run build`（自动填充）
- **Output Directory**: `dist`（自动填充）

### 4. 添加环境变量
- 在 "Environment Variables" 部分
- 添加：
  ```
  VITE_API_BASE_URL = https://你的railway地址
  ```
  （把 `你的railway地址` 替换成第二步第5步复制的 URL）

### 5. 部署
- 点击 "Deploy"
- 等待 1-2 分钟
- 部署完成后，Vercel 会显示一个 URL（如 `https://xxx.vercel.app`）

### 6. 访问网站
- 打开 Vercel 提供的 URL
- 你的网站就可以访问了！
- 把这个 URL 分享给朋友即可

---

## 常见问题

### Q1: Railway 部署失败
- 检查 "Logs" 标签，查看错误信息
- 确认环境变量已正确设置
- 确认 Root Directory 设置为 `backend`

### Q2: Vercel 部署失败
- 检查 "Deployments" → "Logs"
- 确认 Root Directory 设置为 `frontend`
- 确认环境变量 `VITE_API_BASE_URL` 已设置

### Q3: 前端无法连接后端
- 确认 `VITE_API_BASE_URL` 是完整的 URL（包含 `https://`）
- 确认后端 URL 可以访问（在浏览器打开测试）
- 检查浏览器控制台（F12）的错误信息

### Q4: 后端返回 500 错误
- 检查 Railway 的 Logs
- 确认 `DEEPSEEK_API_KEY` 是正确的
- 确认 API Key 有余额

---

## 费用说明

- **Railway**：免费额度每月 500 小时，足够使用
- **Vercel**：免费版完全够用
- **总计**：完全免费！

---

## 更新代码

如果以后修改了代码，只需要：

```powershell
git add .
git commit -m "更新说明"
git push
```

Railway 和 Vercel 会自动重新部署！

---

## 分享给朋友

部署完成后，把 Vercel 提供的 URL 分享给朋友就可以了！

例如：`https://philosopher-chat.vercel.app`

