# 🚀 手把手部署教程 - 让朋友也能访问你的网站

## 📱 好消息：网站已经支持手机和电脑自适应！

代码已经优化好了，在手机上会自动调整大小，在电脑上也会正常显示。

---

## 第一步：准备 GitHub 仓库（5分钟）

### 1.1 注册 GitHub 账号（如果还没有）

1. 打开浏览器，访问：https://github.com
2. 点击右上角 "Sign up"（注册）
3. 填写用户名、邮箱、密码
4. 完成验证，创建账号

### 1.2 创建新仓库

1. 登录 GitHub 后，点击右上角的 **"+"** 按钮
2. 选择 **"New repository"**（新建仓库）
3. 填写信息：
   - **Repository name**（仓库名）：`philosopher-chat`（或你喜欢的名字）
   - **Description**（描述）：`哲学家群聊应用`（可选）
   - 选择 **Public**（公开，这样部署平台才能访问）
   - **不要勾选** "Add a README file"（我们已经有代码了）
4. 点击 **"Create repository"**（创建仓库）

### 1.3 推送代码到 GitHub

**在 PowerShell 中运行以下命令：**

```powershell
# 1. 进入项目目录
cd C:\Users\Fiona\Desktop\tarot

# 2. 初始化 Git（如果还没有）
git init

# 3. 添加所有文件
git add .

# 4. 提交代码
git commit -m "Initial commit - 哲学家群聊应用"

# 5. 添加远程仓库（把 YOUR_USERNAME 替换成你的 GitHub 用户名）
git remote add origin https://github.com/YOUR_USERNAME/philosopher-chat.git

# 6. 推送到 GitHub
git branch -M main
git push -u origin main
```

**注意**：
- 第一次推送可能需要登录 GitHub
- 如果提示输入用户名和密码，用户名是你的 GitHub 用户名
- 密码需要使用 **Personal Access Token**（见下方说明）

### 1.4 创建 Personal Access Token（如果需要）

如果推送时要求输入密码：

1. 访问：https://github.com/settings/tokens
2. 点击 **"Generate new token"** → **"Generate new token (classic)"**
3. 填写：
   - **Note**：`部署用token`
   - **Expiration**：选择 `90 days` 或 `No expiration`
   - **勾选** `repo` 权限
4. 点击 **"Generate token"**
5. **复制生成的 token**（只显示一次！）
6. 推送时，密码处粘贴这个 token

---

## 第二步：部署后端到 Railway（10分钟）

### 2.1 注册 Railway

1. 打开浏览器，访问：https://railway.app
2. 点击 **"Login"** 或 **"Start a New Project"**
3. 选择 **"Login with GitHub"**
4. 授权 Railway 访问你的 GitHub 账号

### 2.2 创建项目

1. 登录后，点击 **"New Project"**（新建项目）
2. 选择 **"Deploy from GitHub repo"**（从 GitHub 仓库部署）
3. 如果提示授权，点击 **"Configure GitHub App"** 并授权
4. 在仓库列表中找到你的 `philosopher-chat` 仓库
5. 点击仓库名称

### 2.3 配置项目

1. Railway 会自动开始部署，但我们需要先配置
2. 点击项目卡片进入项目详情
3. 点击 **"Settings"**（设置）标签
4. 找到 **"Root Directory"**（根目录）
5. 点击 **"Edit"**，输入：`backend`
6. 点击 **"Save"**（保存）

### 2.4 添加环境变量

1. 在项目页面，点击 **"Variables"**（环境变量）标签
2. 点击 **"New Variable"**（新建变量）
3. 添加以下三个环境变量（一个一个添加）：

   **第一个变量：**
   - **Name**：`DEEPSEEK_API_KEY`
   - **Value**：`sk-27b719807adf432a977ace6fdfb58d59`
   - 点击 **"Add"**

   **第二个变量：**
   - **Name**：`DEEPSEEK_API_BASE`
   - **Value**：`https://api.deepseek.com`
   - 点击 **"Add"**

   **第三个变量：**
   - **Name**：`DEEPSEEK_MODEL`
   - **Value**：`deepseek-chat`
   - 点击 **"Add"**

### 2.5 等待部署完成

1. 配置完成后，Railway 会自动重新部署
2. 点击 **"Deployments"**（部署）标签查看进度
3. 等待 2-3 分钟，直到状态显示 **"Active"**（活跃）

### 2.6 获取后端 URL

1. 部署完成后，点击 **"Settings"**（设置）标签
2. 找到 **"Domains"**（域名）部分
3. 点击 **"Generate Domain"**（生成域名）
4. Railway 会生成一个 URL，例如：`https://philosopher-chat-production.up.railway.app`
5. **复制这个 URL**，后面会用到！

### 2.7 测试后端

1. 打开浏览器，访问你复制的 URL + `/api/health`
   - 例如：`https://philosopher-chat-production.up.railway.app/api/health`
2. 应该看到：`{"status":"ok"}`
3. 如果看到这个，说明后端部署成功！✅

---

## 第三步：部署前端到 Vercel（10分钟）

### 3.1 注册 Vercel

1. 打开浏览器，访问：https://vercel.com
2. 点击 **"Sign Up"**（注册）
3. 选择 **"Continue with GitHub"**（使用 GitHub 登录）
4. 授权 Vercel 访问你的 GitHub 账号

### 3.2 创建项目

1. 登录后，点击 **"Add New Project"**（添加新项目）
2. 在 **"Import Git Repository"**（导入 Git 仓库）部分
3. 找到你的 `philosopher-chat` 仓库
4. 点击 **"Import"**（导入）

### 3.3 配置项目

1. 在 **"Configure Project"**（配置项目）页面：
   - **Framework Preset**：应该自动检测到 `Vite`，不用改
   - **Root Directory**：点击 **"Edit"**，输入：`frontend`
   - **Build Command**：自动填充为 `npm run build`，不用改
   - **Output Directory**：自动填充为 `dist`，不用改

### 3.4 添加环境变量

1. 在 **"Environment Variables"**（环境变量）部分
2. 点击 **"Add"** 按钮
3. 填写：
   - **Name**：`VITE_API_BASE_URL`
   - **Value**：粘贴你第二步第 6 步复制的 Railway 后端 URL
     - 例如：`https://philosopher-chat-production.up.railway.app`
   - **注意**：不要加 `/api`，只要基础 URL
4. 点击 **"Add"**

### 3.5 部署

1. 确认所有配置正确
2. 点击页面底部的 **"Deploy"**（部署）按钮
3. 等待 1-2 分钟
4. 部署完成后，Vercel 会显示一个 URL，例如：`https://philosopher-chat.vercel.app`
5. **复制这个 URL**，这就是你的网站地址！

### 3.6 测试网站

1. 打开浏览器，访问 Vercel 提供的 URL
2. 应该能看到你的网站界面
3. 尝试发送一条消息测试
4. 如果一切正常，恭喜你！🎉

---

## 第四步：分享给朋友

1. 把 Vercel 提供的 URL 分享给朋友
2. 他们可以在手机或电脑上打开
3. 网站会自动适应屏幕大小！

---

## 🎯 常见问题解决

### Q1: Railway 部署失败

**检查步骤：**
1. 点击 Railway 项目的 **"Logs"**（日志）标签
2. 查看错误信息
3. 常见问题：
   - **Root Directory 错误**：确认设置为 `backend`
   - **环境变量错误**：确认三个环境变量都已添加
   - **API Key 错误**：确认 `DEEPSEEK_API_KEY` 是正确的

### Q2: Vercel 部署失败

**检查步骤：**
1. 点击 Vercel 项目的 **"Deployments"** → 点击最新的部署 → **"Logs"**
2. 查看错误信息
3. 常见问题：
   - **Root Directory 错误**：确认设置为 `frontend`
   - **环境变量错误**：确认 `VITE_API_BASE_URL` 已设置
   - **构建错误**：检查代码是否有语法错误

### Q3: 前端无法连接后端

**检查步骤：**
1. 确认后端 URL 可以访问（在浏览器打开 `/api/health`）
2. 确认 `VITE_API_BASE_URL` 环境变量是正确的
3. 确认 URL 是 `https://` 开头（不是 `http://`）
4. 打开浏览器开发者工具（F12）→ **Console**（控制台）标签，查看错误信息

### Q4: 手机显示不正常

**检查步骤：**
1. 清除浏览器缓存
2. 确认使用的是最新部署的版本
3. 如果还有问题，告诉我具体问题

---

## 📝 更新代码

如果以后修改了代码，只需要：

```powershell
cd C:\Users\Fiona\Desktop\tarot
git add .
git commit -m "更新说明"
git push
```

Railway 和 Vercel 会自动检测到代码更新并重新部署！

---

## 💰 费用说明

- **Railway**：免费额度每月 500 小时，足够使用
- **Vercel**：免费版完全够用
- **总计**：完全免费！🎉

---

## 🎊 完成！

现在你的网站已经可以公开访问了！把 URL 分享给朋友，让他们也体验一下哲学家群聊吧！

如果遇到任何问题，随时告诉我！

